
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="GliC1jSe3E" />
  
    <title>Java容器类 | AlexYoung&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="AlexYoung">
    
    <meta name="description" itemprop="description" content="It’s a fairly simple program that only has a fixed quantity of objects with known lifetimes.">
    
    
    
    
    <link rel="alternative" href="/atom.xml" title="AlexYoung&#39;s blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="AlexYoung&#39;s blog" title="AlexYoung&#39;s blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="AlexYoung&#39;s blog">AlexYoung&#39;s blog</a></h1>
				<h2 class="blog-motto">当你的才华还撑不起你的野心时，你就应该静下心来学习。</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:alexyyek.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/06/Collection/" title="Java容器类" itemprop="url">Java容器类</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/118224772589648180000?rel=author" title="AlexYoung" target="_blank" itemprop="author">AlexYoung</a>
		
  <p class="article-time">
    <time datetime="2015-04-06T09:24:38.000Z" itemprop="datePublished"> 发表于 4月 6 2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#容器类框架"><span class="toc-number">1.</span> <span class="toc-text">容器类框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Collection接口"><span class="toc-number">2.</span> <span class="toc-text">Collection接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List接口"><span class="toc-number">3.</span> <span class="toc-text">List接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ArrayList"><span class="toc-number">3.1.</span> <span class="toc-text">ArrayList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedList"><span class="toc-number">3.2.</span> <span class="toc-text">LinkedList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vector"><span class="toc-number">3.3.</span> <span class="toc-text">Vector</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stack"><span class="toc-number">3.4.</span> <span class="toc-text">Stack</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set接口"><span class="toc-number">4.</span> <span class="toc-text">Set接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HashSet"><span class="toc-number">4.1.</span> <span class="toc-text">HashSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TreeSet"><span class="toc-number">4.2.</span> <span class="toc-text">TreeSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedHashSet"><span class="toc-number">4.3.</span> <span class="toc-text">LinkedHashSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EnumSet"><span class="toc-number">4.4.</span> <span class="toc-text">EnumSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map接口"><span class="toc-number">5.</span> <span class="toc-text">Map接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HashMap"><span class="toc-number">5.1.</span> <span class="toc-text">HashMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HashTable"><span class="toc-number">5.2.</span> <span class="toc-text">HashTable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TreeMap"><span class="toc-number">5.3.</span> <span class="toc-text">TreeMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WeakHashMap"><span class="toc-number">5.4.</span> <span class="toc-text">WeakHashMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Iterator"><span class="toc-number">6.</span> <span class="toc-text">Iterator</span></a></li></ol>
		
		</div>
		
		<p>Java容器类是java提供的工具包，包含了常用的数据结构：集合、链表、队列、栈、数组、映射等。从本文开始将开启一个系列详细分析Java容器中的每个成员，包括源代码分析，性能分析，不同容器之间对比等等，链接将同步更新在本文和<a href="http://alexyyek.github.io/2015/01/06/sticky/" target="_blank" rel="external">置顶博文</a>内。</p>
<p>Java容器主要可以划分为4个部分：List列表、Set集合、Map映射、工具类（Iterator迭代器、Enumeration枚举类、Arrays和Collections）</p>
<h2 id="容器类框架">容器类框架</h2>
<p>Java容器工具包框架图：</p>
<p><center> <img src="http://alexyoung.qiniudn.com/08171028-a5e372741b18431591bb577b1e1c95e6.jpg" alt=""> <center></center></center></p>
<p>通过上图，可以把握两个基本主体，即Collection和Map。</p>
<ol>
<li><p>Collection是一个接口，是高度抽象出来的集合，它包含了集合的基本操作和属性。Collection包含了List和Set两大分支。</p>
<p> List是一个有序的队列，每一个元素都有它的索引。第一个元素的索引值是0。List的实现类有LinkedList, ArrayList, Vector, Stack。<br> Set是一个不允许有重复元素的集合。 Set的实现类有HastSet和TreeSet。HashSet依赖于HashMap，它实际上是通过HashMap实现的；TreeSet依赖于TreeMap，它实际上是通过TreeMap实现的。</p>
</li>
<li><p>Map是一个映射接口，即key-value键值对。Map中的每一个元素包含“一个key”和“key对应的value”。</p>
<p>AbstractMap是个抽象类，它实现了Map接口中的大部分API。而HashMap，TreeMap，WeakHashMap都是继承于AbstractMap。<br>Hashtable虽然继承于Dictionary，但它实现了Map接口。</p>
</li>
<li><p>Iterator是遍历集合的工具，即我们通常通过Iterator迭代器来遍历集合。我们说Collection依赖于Iterator，是因为Collection的实现类都要实现iterator()函数，返回一个Iterator对象。ListIterator是专门为遍历List而存在的。</p>
</li>
<li><p>Enumeration是JDK 1.0引入的抽象类。作用和Iterator一样，也是遍历集合；但是Enumeration的功能要比Iterator少。在上面的框图中，Enumeration只能在Hashtable, Vector, Stack中使用。</p>
</li>
<li><p>Arrays和Collections是操作数组、集合的两个工具类。</p>
</li>
</ol>
<p>有了上面的整体框架之后，我们接下来对每个类分别进行分析。</p>
<h2 id="Collection接口">Collection接口</h2>
<p>Collection的定义如下：</p>
<p> <code>public interface Collection&lt;E&gt; extends Iterable&lt;E&gt; {}</code> </p>
<p>它是一个接口，是高度抽象出来的集合，它包含了集合的基本操作：添加、删除、清空、遍历(读取)、是否为空、获取大小、是否保护某元素等等。</p>
<p>在Java中所有实现了Collection接口的类都必须提供两套标准的构造函数，一个是无参，用于创建一个空的Collection，一个是带有Collection参数的有参构造函数，用于创建一个新的Collection，这个新的Collection与传入进来的Collection具备相同的元素。</p>
<p>Collection的API：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         add(E object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         addAll(Collection&lt;? extends E&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">void</span>            clear()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         contains(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         containsAll(Collection&lt;?&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         equals(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">int</span>             hashCode()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         isEmpty()</div><div class="line"><span class="keyword">abstract</span> Iterator&lt;E&gt;     iterator()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         remove(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         removeAll(Collection&lt;?&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         retainAll(Collection&lt;?&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">int</span>             size()</div><div class="line"><span class="keyword">abstract</span> &lt;T&gt; T[]         toArray(T[] array)</div><div class="line"><span class="keyword">abstract</span> Object[]        toArray()</div></pre></td></tr></table></figure>

<h2 id="List接口">List接口</h2>
<p>List的定义如下：</p>
<p><code>public interface List&lt;E&gt; extends Collection&lt;E&gt; {}</code></p>
<p>List是一个继承于Collection的接口，即List是集合中的一种。List是有序的队列，List中的每一个元素都有一个索引；第一个元素的索引值是0，往后的元素的索引值依次+1。和Set不同，List中允许有重复的元素。</p>
<blockquote>
<p>官方文档：A List is a collection which maintains an ordering for its elements. Every element in the List has an index. Each element can thus be accessed by its index, with the first index being zero. Normally, Lists allow duplicate elements, as compared to Sets, where elements have to be unique.</p>
</blockquote>
<p>关于API方面。既然List是继承于Collection接口，它自然就包含了Collection中的全部函数接口；由于List是有序队列，它也额外的有自己的API接口。主要有“添加、删除、获取、修改指定位置的元素”、“获取List中的子队列”等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Collection的API</span></div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         add(E object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         addAll(Collection&lt;? extends E&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">void</span>            clear()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         contains(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         containsAll(Collection&lt;?&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         equals(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">int</span>             hashCode()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         isEmpty()</div><div class="line"><span class="keyword">abstract</span> Iterator&lt;E&gt;     iterator()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         remove(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         removeAll(Collection&lt;?&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>         retainAll(Collection&lt;?&gt; collection)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">int</span>             size()</div><div class="line"><span class="keyword">abstract</span> &lt;T&gt; T[]         toArray(T[] array)</div><div class="line"><span class="keyword">abstract</span> Object[]        toArray()</div><div class="line"><span class="comment">// 相比与Collection，List新增的API：</span></div><div class="line"><span class="keyword">abstract</span> <span class="keyword">void</span>                add(<span class="keyword">int</span> location, E object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span>             addAll(<span class="keyword">int</span> location, Collection&lt;? extends E&gt; collection)</div><div class="line"><span class="keyword">abstract</span> E                   get(<span class="keyword">int</span> location)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">int</span>                 indexOf(Object object)</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">int</span>                 lastIndexOf(Object object)</div><div class="line"><span class="keyword">abstract</span> ListIterator&lt;E&gt;     listIterator(<span class="keyword">int</span> location)</div><div class="line"><span class="keyword">abstract</span> ListIterator&lt;E&gt;     listIterator()</div><div class="line"><span class="keyword">abstract</span> E                   remove(<span class="keyword">int</span> location)</div><div class="line"><span class="keyword">abstract</span> E                   set(<span class="keyword">int</span> location, E object)</div><div class="line"><span class="keyword">abstract</span> List&lt;E&gt;             subList(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</div></pre></td></tr></table></figure>

<p>实现List接口的集合主要有：ArrayList、LinkedList、Vector、Stack。</p>
<h3 id="ArrayList">ArrayList</h3>
<p>ArrayList定义如下：</p>
<p><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</code><br><code>implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</code></p>
<p>ArrayList是一个动态数组，也是我们最常用的集合。它允许任何符合规则的元素插入甚至包括null。每一个ArrayList都有一个初始容量：</p>
<p><code>private static final int DEFAULT_CAPACITY = 10;</code></p>
<p>随着容器中的元素不断增加，容器的大小也会随着增加。在每次向容器中增加元素的同时都会进行容量检查，当快溢出时，就会进行扩容操作。所以如果我们明确所插入元素的多少，最好指定一个初始容量值，避免过多的进行扩容操作而浪费时间、效率。</p>
<p> size、isEmpty、get、set、iterator 和 listIterator 操作都以固定时间运行。add 操作以分摊的固定时间运行，也就是说，添加 n 个元素需要 O(n) 时间（由于要考虑到扩容，所以这不只是添加元素会带来分摊固定时间开销那样简单）。</p>
<p>ArrayList擅长于随机访问。同时ArrayList是非同步的。</p>
<h3 id="LinkedList">LinkedList</h3>
<p>LinkedList定义如下：</p>
<p><code>public class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt;</code><br>    <code>implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</code></p>
<p>同样实现List接口的LinkedList与ArrayList不同，ArrayList是一个动态数组，而LinkedList是一个双向链表。所以它除了有ArrayList的基本操作方法外还额外提供了get，remove，insert方法在LinkedList的首部或尾部。</p>
<p>由于实现的方式不同，LinkedList不能随机访问，它所有的操作都是要按照双重链表的需要执行。在列表中索引的操作将从开头或结尾遍历列表（从靠近指定索引的一端，节约一半时间）。这样做的好处就是可以通过较低的代价在List中进行插入和删除操作。</p>
<p>与ArrayList一样，LinkedList也是非同步的。如果多个线程同时访问一个List，则必须自己实现访问同步。一种解决方法是在创建List时构造一个同步的List： </p>
<p><code>List list = Collections.synchronizedList(new LinkedList(…));</code></p>
<h3 id="Vector">Vector</h3>
<p>Vector定义如下：</p>
<p><code>public class Vector&lt;E&gt; extends AbstractList&lt;E&gt;</code><br>    <code>implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</code></p>
<p>与ArrayList相似，但是Vector是同步的。所以说Vector是线程安全的动态数组。它的操作与ArrayList几乎一样。</p>
<h3 id="Stack">Stack</h3>
<p>Stack定义如下：</p>
<p><code>public class Stack&lt;E&gt; extends Vector&lt;E&gt; {}</code></p>
<p>Stack继承自Vector，实现一个后进先出的堆栈。Stack提供5个额外的方法使得Vector得以被当作堆栈使用。基本的push和pop方法，还有peek方法得到栈顶的元素，empty方法测试堆栈是否为空，search方法检测一个元素在堆栈中的位置。Stack刚创建后是空栈。</p>
<h2 id="Set接口">Set接口</h2>
<p>Set定义如下：</p>
<p><code>public interface Set&lt;E&gt; extends Collection&lt;E&gt; {}</code></p>
<p>Set是一个继承于Collection的接口，Set是一种不包括重复元素的Collection。它维持它自己的内部排序，所以随机访问没有任何意义。与List一样，它同样运行null的存在但是仅有一个。由于Set接口的特殊性，所有传入Set集合中的元素都必须不同，</p>
<p>关于API方面。Set的API和Collection完全一样。</p>
<p>实现了Set接口的集合有：HashSet、TreeSet、LinkedHashSet、EnumSet。</p>
<h3 id="HashSet">HashSet</h3>
<p>HashSet定义如下：</p>
<p><code>public class HashSet&lt;E&gt; extends AbstractSet&lt;E&gt;</code><br>    <code>implements Set&lt;E&gt;, Cloneable, java.io.Serializable</code></p>
<p>HashSet堪称查询速度最快的集合，因为其内部是以HashCode来实现的。集合元素可以是null,但只能放入一个null。它内部元素的顺序是由哈希码来决定的，所以它不保证set的迭代顺序；特别是它不保证该顺序恒久不变。</p>
<h3 id="TreeSet">TreeSet</h3>
<p>TreeSet定义如下：</p>
<p><code>public class TreeSet&lt;E&gt; extends AbstractSet&lt;E&gt;</code><br>    <code>implements NavigableSet&lt;E&gt;, Cloneable, java.io.Serializable</code></p>
<p>TreeSet是二叉树实现的，基于TreeMap，生成一个总是处于排序状态的set，内部以TreeMap来实现，不允许放入null值。它是使用元素的自然顺序对元素进行排序，或者根据创建Set时提供的 Comparator 进行排序，具体取决于使用的构造方法。</p>
<h3 id="LinkedHashSet">LinkedHashSet</h3>
<p>LinkedHashSet定义如下：</p>
<p><code>public class LinkedHashSet&lt;E&gt; extends HashSet&lt;E&gt;</code><br>    <code>implements Set&lt;E&gt;, Cloneable, java.io.Serializable</code></p>
<p>LinkedHashSet集合同样是根据元素的hashCode值来决定元素的存储位置，但是它同时使用链表维护元素的次序。这样使得元素看起 来像是以插入顺序保存的，也就是说，当遍历该集合时候，LinkedHashSet将会以元素的添加顺序访问集合的元素。LinkedHashSet在迭代访问Set中的全部元素时，性能比HashSet好，但是插入时性能稍微逊色于HashSet。</p>
<h3 id="EnumSet">EnumSet</h3>
<p>EnumSet定义如下：</p>
<p><code>public abstract class EnumSet&lt;E extends Enum&lt;E&gt;&gt; extends AbstractSet&lt;E&gt;</code><br>    <code>implements Cloneable, java.io.Serializable</code></p>
<p>EnumSet中所有值都必须是指定枚举类型的值，它的元素也是有序的，以枚举值在枚举类的定义顺序来决定集合元素的顺序。EnumSet集合不允许加入null元素，否则会抛出NullPointerException异常。EnumSet类没有暴露任何构造器来创建该类的实例，程序应该通过它提供的static方法来创建EnumSet对象，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line"></div><div class="line">        <span class="comment">//创建一个EnumSet空集合，指定其集合元素是season1的枚举值</span></div><div class="line">		EnumSet&lt;MyEnum&gt;eSet1 = EnumSet.noneOf(MyEnum.class); </div><div class="line">		</div><div class="line">		<span class="comment">////创建一个EnumSet集合，集合元素就是Season里的全部枚举值</span></div><div class="line">		EnumSet&lt;MyEnum&gt;eSet2 = EnumSet.allOf(MyEnum.class);</div><div class="line">	}</div><div class="line">	</div><div class="line">	<span class="keyword">enum</span> MyEnum {  </div><div class="line">	    BLACK, WHITE, RED, BLUR, GREEN, YELLOW  </div><div class="line">	}</div></pre></td></tr></table></figure>

<p>来看一个例子感受一下存储元素的区别：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> Collection fill(Collection&lt;String&gt; collection) {</div><div class="line">		collection.add(<span class="string">"rat"</span>);</div><div class="line">		collection.add(<span class="string">"cat"</span>);</div><div class="line">		collection.add(<span class="string">"dog"</span>);</div><div class="line">		collection.add(<span class="string">"dog"</span>);</div><div class="line">		<span class="keyword">return</span> collection;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line">		System.out.println(fill(<span class="keyword">new</span> HashSet&lt;String&gt;()));</div><div class="line">		System.out.println(fill(<span class="keyword">new</span> TreeSet&lt;&gt;()));</div><div class="line">		System.out.println(fill(<span class="keyword">new</span> LinkedHashSet&lt;&gt;()));</div><div class="line">	}</div></pre></td></tr></table></figure>

<p>HashSet是哈希表实现的，存储顺序并无意义。如果存储顺序很重要，那么可以使用TreeSet，它按比较结果的升序保存对象；或者使用LinkedHashSet，它按照被添加的顺序保存元素。当然它们都是线程不安全的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Result:</span></div><div class="line">[rat, cat, dog]</div><div class="line">[cat, dog, rat]</div><div class="line">[rat, cat, dog]</div></pre></td></tr></table></figure>

<h2 id="Map接口">Map接口</h2>
<p>Map与List、Set接口不同，它是由一系列键值对组成的集合，提供了key到Value的映射。在Map中它保证了key与value之间的一一对应关系。也就是说一个key对应一个value，所以它不能存在相同的key值，当然value值可以相同。</p>
<p>实现map的集合有：HashMap、HashTable、TreeMap、WeakHashMap。</p>
<h3 id="HashMap">HashMap</h3>
<p>HashMap定义如下：</p>
<p><code>public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt;</code><br>    <code>implements Map&lt;K,V&gt;, Cloneable, Serializable</code></p>
<p>以哈希表数据结构实现，查找对象时通过哈希函数计算其位置，它是为快速查询而设计的，其内部定义了一个hash表数组（Entry[] table），元素会通过哈希转换函数将元素的哈希地址转换成数组中存放的索引，如果有冲突，则使用散列链表的形式将所有相同哈希地址的元素串起来，可能通过查看HashMap.Entry的源码它是一个单链表结构。</p>
<h3 id="HashTable">HashTable</h3>
<p>HashTable的定义如下：</p>
<p><code>public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt;</code><br>    <code>implements Map&lt;K,V&gt;, Cloneable, java.io.Serializable</code></p>
<p>也是以哈希表数据结构实现的，解决冲突时与HashMap也一样也是采用了散列链表的形式。HashTable继承Dictionary类，实现Map接口。其中Dictionary类是任何可将键映射到相应值的类（如 Hashtable）的抽象父类。每个键和每个值都是一个对象。在任何一个 Dictionary 对象中，每个键至多与一个值相关联。Map是”key-value键值对”接口。     HashTable采用”拉链法”实现哈希表不过性能比HashMap要低。</p>
<h3 id="TreeMap">TreeMap</h3>
<p>TreeMap的定义如下：</p>
<p><code>public class TreeMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt;</code><br>    <code>implements NavigableMap&lt;K,V&gt;, Cloneable, java.io.Serializable</code></p>
<p>有序散列表，实现SortedMap接口，底层通过红黑树实现。</p>
<h3 id="WeakHashMap">WeakHashMap</h3>
<p>WeakHashMap的定义如下：</p>
<p><code>public class WeakHashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt;</code><br>    <code>implements Map&lt;K,V&gt;</code></p>
<p>谈WeakHashMap前先看一下Java中的引用（强度依次递减）</p>
<ol>
<li>强引用：普遍对象声明的引用，存在便不会GC</li>
<li>软引用：有用但并非必须，发生内存溢出前，二次回收</li>
<li>弱引用：只能生存到下次GC之前，无论是否内存足够</li>
<li>虚引用：唯一目的是在这个对象被GC时能收到一个系统通知</li>
</ol>
<p>以弱键实现的基于哈希表的Map。在 WeakHashMap 中，当某个键不再正常使用时，将自动移除其条目。更精确地说，对于一个给定的键，其映射的存在并不阻止垃圾回收器对该键的丢弃，这就使该键成为可终止的，被终止，然后被回收。丢弃某个键时，其条目从映射中有效地移除，因此，该类的行为与其他的 Map 实现有所不同。null值和null键都被支持。该类具有与HashMap类相似的性能特征,并具有相同的效能参数初始容量和加载因子。像大多数集合类一样，该类是不同步的。</p>
<h2 id="Iterator">Iterator</h2>
<p>Iterator定义如下：</p>
<p><code>public interface Iterator&lt;E&gt; {}</code></p>
<p>Iterator是一个接口，它是集合的迭代器。集合可以通过Iterator去遍历集合中的元素。Iterator提供的API接口，包括：是否存在下一个元素、获取下一个元素、删除当前元素。<br>注意：Iterator遍历Collection时，是fail-fast机制的。即，当某一个线程A通过iterator去遍历某集合的过程中，若该集合的内容被其他线程所改变了；那么线程A访问集合时，就会抛出ConcurrentModificationException异常，产生fail-fast事件。关于fail-fast的详细内容，我们会在后面专门进行说明。</p>
<p>Iterator的API：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="keyword">boolean</span> hasNext()</div><div class="line"><span class="keyword">abstract</span> E next()</div><div class="line"><span class="keyword">abstract</span> <span class="keyword">void</span> remove()</div></pre></td></tr></table></figure>

<p><br></p>
<p>最后用一张图总结一下大体框架，后面会开始具体分析。</p>
<p><center> <img src="http://alexyoung.qiniudn.com/QQ图片20150407223455.png" alt=""> <center></center></center></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java/">Java</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/coding/">coding</a>
  </div>

</div>


<div class="article-share" id="share">

  <div data-url="http://alexyyek.github.io/2015/04/06/Collection/" data-title="Java容器类 | AlexYoung&#39;s blog" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/04/12/ArrayList/" title="ArrayList">
  <strong>上一篇：</strong><br/>
  <span>
  ArrayList</span>
</a>
</div>


<div class="next">
<a href="/2015/03/13/Intership/"  title="五天七面——正确定位自己">
 <strong>下一篇：</strong><br/> 
 <span>五天七面——正确定位自己
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>


<section class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#容器类框架"><span class="toc-number">1.</span> <span class="toc-text">容器类框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Collection接口"><span class="toc-number">2.</span> <span class="toc-text">Collection接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List接口"><span class="toc-number">3.</span> <span class="toc-text">List接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ArrayList"><span class="toc-number">3.1.</span> <span class="toc-text">ArrayList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedList"><span class="toc-number">3.2.</span> <span class="toc-text">LinkedList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vector"><span class="toc-number">3.3.</span> <span class="toc-text">Vector</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stack"><span class="toc-number">3.4.</span> <span class="toc-text">Stack</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set接口"><span class="toc-number">4.</span> <span class="toc-text">Set接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HashSet"><span class="toc-number">4.1.</span> <span class="toc-text">HashSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TreeSet"><span class="toc-number">4.2.</span> <span class="toc-text">TreeSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedHashSet"><span class="toc-number">4.3.</span> <span class="toc-text">LinkedHashSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EnumSet"><span class="toc-number">4.4.</span> <span class="toc-text">EnumSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map接口"><span class="toc-number">5.</span> <span class="toc-text">Map接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HashMap"><span class="toc-number">5.1.</span> <span class="toc-text">HashMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HashTable"><span class="toc-number">5.2.</span> <span class="toc-text">HashTable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TreeMap"><span class="toc-number">5.3.</span> <span class="toc-text">TreeMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WeakHashMap"><span class="toc-number">5.4.</span> <span class="toc-text">WeakHashMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Iterator"><span class="toc-number">6.</span> <span class="toc-text">Iterator</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/JVM/" title="JVM">JVM<sup>1</sup></a></li>
		
			<li><a href="/categories/Java/" title="Java">Java<sup>24</sup></a></li>
		
			<li><a href="/categories/生活感悟/" title="生活感悟">生活感悟<sup>3</sup></a></li>
		
			<li><a href="/categories/黑科技/" title="黑科技">黑科技<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/coding/" title="coding">coding<sup>18</sup></a></li>
		
			<li><a href="/tags/leetcode/" title="leetcode">leetcode<sup>6</sup></a></li>
		
			<li><a href="/tags/stack/" title="stack">stack<sup>3</sup></a></li>
		
			<li><a href="/tags/skill/" title="skill">skill<sup>3</sup></a></li>
		
			<li><a href="/tags/life/" title="life">life<sup>2</sup></a></li>
		
			<li><a href="/tags/Tree/" title="Tree">Tree<sup>2</sup></a></li>
		
			<li><a href="/tags/hash/" title="hash">hash<sup>2</sup></a></li>
		
			<li><a href="/tags/Arrays/" title="Arrays">Arrays<sup>1</sup></a></li>
		
			<li><a href="/tags/Bit-Manipulation/" title="Bit Manipulation">Bit Manipulation<sup>1</sup></a></li>
		
			<li><a href="/tags/heap/" title="heap">heap<sup>1</sup></a></li>
		
			<li><a href="/tags/Movie/" title="Movie">Movie<sup>1</sup></a></li>
		
			<li><a href="/tags/dfs/" title="dfs">dfs<sup>1</sup></a></li>
		
			<li><a href="/tags/consectetur/" title="consectetur">consectetur<sup>0</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
      <li><a href="http://coolshell.cn/" target="_blank" title="CoolShell">CoolShell</a></li>
	  <li><a href="http://it.deepinmind.com/index.html" target="_blank" title="DeepinMind">DeepinMind</a><li>
	  <li><a href="http://mindhacks.cn/" target="_blank" title="MindHacks">MindHacks</a></li> 
	  <li><a href="https://www.byvoid.com/" target="_blank" title="Beyond the Void">Beyond the Void</a></li> 
	  <li><a href="http://rednaxelafx.iteye.com/" target="_blank" title="Script Ahead, Code Behind">Script Ahead,Code Behind</a></li> 
	   <li><a href="http://wmbriggs.com/blog/" target="_blank" title="WILLIAM M. BRIGGS">WILLIAM M. BRIGGS</a></li> 
	  </ul>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
     <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=120&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1397989251&verifier=23b91096&dpc=1"></iframe>
</div>

  <div class="pay">
  <p class="asidetitle">赞助我</p>
	<aside id="text-8" class="widget widget_text">
	<br/>
	<div align="center">
	<div class="textwidget">
	<form action="https://shenghuo.alipay.com/send/payment/fill.htm" method="POST" target="_blank" accept-charset="GBK"> <input name="optEmail" type="hidden" value="alexyyek@126.com"> 
	<input name="payAmount" type="hidden" value="10">
	<input name="title" type="hidden" value="赞助AlexYoung">
	<input name="memo" type="hidden" value="感谢您的赞助">
	<input name="pay" type="image" value="捐款" src="/img/alipay1.png">
	</form>
	</div>
</aside>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div align="center">
<br/>
	欢迎第
	<a href="http://www.amazingcounters.com"><img border="0" src="http://cc.amazingcounters.com/counter.php?i=3183127&c=9549694" alt="AmazingCounters.com">
	</a>
	位访问者
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Labeling is cheap. Show me the story <br/>
			 </p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/Alexyyek" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://www.douban.com/people/57383464" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="https://plus.google.com/118224772589648180000?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:alexyyek@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/Alexyyek/geekman" target="_blank" title="Pacman">Geekman</a> © 2015 
		
		<a href="http://alexyyek.github.io/about" target="_blank" title="AlexYoung">AlexYoung</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"alexyyek"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>


<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F140dd3dc3eb949d6e77762baa6202ce9' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- Analytics Begin -->



<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F140dd3dc3eb949d6e77762baa6202ce9' type='text/javascript'%3E%3C/script%3E"));
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

  </body>
</html>
